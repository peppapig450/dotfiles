alias reload='exec zsh'

# Load general always-on aliases
source "${ZDOTDIR}"/aliases/navigation.zsh

# Setup lazy loading
autoload -Uz add-zsh-hook

# Lazy load ls aliases

# List all "entry point" commands that should trigger loading
_ls_alias_triggers=(
  ls la ll lla llh llha lt ltg lta ltag lr lra lone lonea
  lgit lgittree ldirs lfiles lsize ltime ltype lname lext
  lextend lctx linode lcolor lbig lbytes labs llinks lmount loctal
  lno lano laccess lcreate lchange lall dls
  ls-sort
)

_lazy_load_ls_aliases() {
    local cmd="${1%%[[:space:]]*}"
    for alias in "${_ls_alias_triggers[@]}"; do
        [[ "$cmd" == "$alias" ]] && {
            source "${ZDOTDIR}/aliases/ls-aliases.zsh"
            add-zsh-hook -d preexec _lazy_load_ls_aliases
            return
        }
    done
}

_cat_alias_triggers=(
    cat fzfcat
)

_lazy_load_cat_aliases() {
    local cmd="${1%%[[:space:]]*}"
    for alias in "${_cat_alias_triggers[@]}"; do
        [[ "$cmd" == "$alias" ]] && {
            source "${ZDOTDIR}/aliases/bat.zsh"
            add-zsh-hook -d preexec _lazy_load_cat_aliases
            return
        }
    done    
}

_chezmoi_alias_triggers=(
    'cz*' 'chezmoi'
)

_lazy_load_chezmoi_aliases() {
    local cmd="${1%%[[:space:]]*}"
    for alias in "${_chezmoi_alias_triggers[@]}"; do
        [[ "$cmd" == "$alias" ]] && {
            source "${ZDOTDIR}/aliases/chezmoi.zsh"
            add-zsh-hook -d preexec _lazy_load_chezmoi_aliases
            return
        }
    done
}

add-zsh-hook preexec _lazy_load_chezmoi_aliases
add-zsh-hook preexec _lazy_load_cat_aliases
add-zsh-hook preexec _lazy_load_ls_aliases

# Reset cursor (curse you nvim)
alias rc-cursor='reset_cursor' # Call the function from ~/.config/zsh/agnostic_functions

# More convenient alias for zoxide
alias j='z'
alias ji='zj'

